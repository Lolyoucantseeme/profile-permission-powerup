<template>
    <lightning-card title="Configure Object Permissions" icon-name="standard:settings">
        <div class="slds-var-p-horizontal_small slds-var-m-bottom_medium">
            <lightning-combobox
                name="sobjectSelector"
                label="Select SObject"
                value={selectedObjectApiName}
                placeholder="Choose an object..."
                options={sObjectOptions}
                onchange={handleObjectSelection}
                disabled={disabled}
            ></lightning-combobox>
        </div>

        <template if:true={isObjectSelected}>
            <div class="slds-var-p-horizontal_small slds-var-m-bottom_medium">
                <div class="slds-box slds-box_xx-small slds-theme_shade">
                    <h3 class="slds-text-heading_small slds-var-m-bottom_xx-small">
                        Selected Object: {selectedObjectDetails.label}
                        <lightning-badge 
                            if:true={selectedObjectDetails.isCustom} 
                            label="Custom" 
                            class="slds-var-m-left_small">
                        </lightning-badge>
                    </h3>
                    <p class="slds-text-body_small">API Name: {selectedObjectDetails.apiName}</p>
                </div>
            </div>

            <div class="slds-var-p-horizontal_small">
                <h3 class="slds-text-heading_medium slds-var-m-bottom_small">Object Permissions</h3>
                <div class="slds-grid slds-wrap slds-gutters_x-small">
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="Read"
                            name="read"
                            checked={currentObjectPermissions.read}
                            onchange={handlePermissionChange}
                            data-perm="read"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="Create"
                            name="create"
                            checked={currentObjectPermissions.create}
                            onchange={handlePermissionChange}
                            data-perm="create"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="Edit"
                            name="edit"
                            checked={currentObjectPermissions.edit}
                            onchange={handlePermissionChange}
                            data-perm="edit"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="Delete"
                            name="delete"
                            checked={currentObjectPermissions.delete}
                            onchange={handlePermissionChange}
                            data-perm="delete"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="View All Records"
                            name="viewAll"
                            checked={currentObjectPermissions.viewAll}
                            onchange={handlePermissionChange}
                            data-perm="viewAll"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-var-m-bottom_small">
                        <lightning-input
                            type="checkbox"
                            label="Modify All Records"
                            name="modifyAll"
                            checked={currentObjectPermissions.modifyAll}
                            onchange={handlePermissionChange}
                            data-perm="modifyAll"
                            disabled={disabled}
                        ></lightning-input>
                    </div>
                </div>
            </div>
        </template>
        <template if:false={isObjectSelected}>
            <div class="slds-align_absolute-center slds-var-p-vertical_medium slds-text-color_weak">
                <template if:true={disabled}>
                    Select profiles to enable object selection.
                </template>
                <template if:false={disabled}>
                    Select an SObject from the list above to configure its permissions.
                </template>
            </div>
        </template>
    </lightning-card>
</template>
